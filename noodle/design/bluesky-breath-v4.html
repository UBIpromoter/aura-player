<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aura Pulse V4 — Radiating Rings</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

  * { box-sizing: border-box; }
  body {
    font-family: 'Inter', sans-serif;
    background: #030712;
    overflow-x: hidden;
  }

  /* ══════════════════════════════════════════════════════════════
     AURA PULSE — Concentric rings radiating from center
     ══════════════════════════════════════════════════════════════ */

  .aura-container {
    position: relative;
    width: 280px;
    height: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Core center glow — subtle, not a blob */
  .aura-core {
    position: absolute;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: radial-gradient(circle,
      rgba(139, 92, 246, 0.6) 0%,
      rgba(139, 92, 246, 0.3) 40%,
      transparent 70%
    );
    filter: blur(8px);
    z-index: 10;
  }

  /* Inner bright point */
  .aura-center {
    position: absolute;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: radial-gradient(circle,
      rgba(255, 255, 255, 0.9) 0%,
      rgba(196, 181, 253, 0.8) 50%,
      rgba(139, 92, 246, 0.6) 100%
    );
    z-index: 20;
    box-shadow:
      0 0 20px rgba(139, 92, 246, 0.6),
      0 0 40px rgba(139, 92, 246, 0.4),
      0 0 60px rgba(139, 92, 246, 0.2);
  }

  /* Pulse ring base */
  .pulse-ring {
    position: absolute;
    border-radius: 50%;
    opacity: 0;
    pointer-events: none;
    /* Glow effect on rings */
    filter: blur(0.5px);
  }

  /* Ring animations — staggered waves */
  @keyframes pulse-out {
    0% {
      transform: scale(0.08);
      opacity: 0;
    }
    10% {
      opacity: var(--ring-opacity, 0.7);
    }
    80% {
      opacity: calc(var(--ring-opacity, 0.7) * 0.3);
    }
    100% {
      transform: scale(var(--max-scale, 1));
      opacity: 0;
    }
  }

  /* Ambient glow behind everything */
  .aura-ambient {
    position: absolute;
    width: 200%;
    height: 200%;
    border-radius: 50%;
    background: radial-gradient(circle,
      rgba(139, 92, 246, 0.08) 0%,
      rgba(139, 92, 246, 0.03) 30%,
      transparent 60%
    );
    pointer-events: none;
    z-index: 0;
  }

  /* ══════════════════════════════════════════════════════════════
     TRAIT LEGEND
     ══════════════════════════════════════════════════════════════ */

  .legend-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 16px;
    padding: 16px;
  }

  .legend-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  }

  .legend-item:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }

  .legend-item:first-child {
    padding-top: 0;
  }

  .legend-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 16px;
  }

  .legend-content {
    flex: 1;
    min-width: 0;
  }

  .legend-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
  }

  .legend-trait-name {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .legend-percent {
    font-size: 14px;
    font-weight: 700;
    font-variant-numeric: tabular-nums;
  }

  .legend-mapping {
    font-size: 10px;
    color: rgba(255, 255, 255, 0.5);
    line-height: 1.5;
  }

  /* ══════════════════════════════════════════════════════════════
     CONTROLS
     ══════════════════════════════════════════════════════════════ */

  .control-btn {
    padding: 10px 18px;
    border-radius: 10px;
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: none;
  }

  .control-btn.primary {
    background: #8b5cf6;
    color: white;
  }

  .control-btn.primary:hover {
    background: #7c3aed;
    transform: translateY(-1px);
  }

  .control-btn.secondary {
    background: rgba(255, 255, 255, 0.06);
    color: rgba(255, 255, 255, 0.7);
  }

  .control-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .control-btn:active {
    transform: scale(0.97);
  }

  /* ══════════════════════════════════════════════════════════════
     SECTION STYLING
     ══════════════════════════════════════════════════════════════ */

  .section-header {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: rgba(255,255,255,0.4);
    margin-bottom: 10px;
  }

  /* ══════════════════════════════════════════════════════════════
     INSIGHT CARD
     ══════════════════════════════════════════════════════════════ */

  .insight-card {
    text-align: center;
    padding: 14px;
    background: rgba(139, 92, 246, 0.05);
    border-radius: 14px;
    border: 1px solid rgba(139, 92, 246, 0.1);
  }

  .insight-label {
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: rgba(255, 255, 255, 0.4);
    margin-bottom: 6px;
  }

  .insight-text {
    font-size: 12px;
    line-height: 1.6;
    color: rgba(255, 255, 255, 0.7);
  }

  .insight-text strong {
    color: #c4b5fd;
    font-weight: 500;
  }
</style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start p-6 gap-5">

  <!-- Header -->
  <div class="text-center">
    <div class="text-xl font-semibold mb-1 text-white">Your Aura Pulse</div>
    <div class="text-xs text-gray-500 uppercase tracking-widest">V4 — Radiating Rings</div>
  </div>

  <!-- Main Visualization -->
  <div class="aura-container" id="aura-container">
    <!-- Ambient background glow -->
    <div class="aura-ambient"></div>

    <!-- Core glow -->
    <div class="aura-core" id="aura-core"></div>

    <!-- Center point -->
    <div class="aura-center" id="aura-center"></div>

    <!-- Pulse rings will be generated by JS -->
  </div>

  <!-- Trait Legend -->
  <div class="w-full max-w-sm">
    <div class="section-header">Pulse Encoding</div>
    <div class="legend-card">
      <!-- Energy → Ring Speed -->
      <div class="legend-item">
        <div class="legend-icon" style="background: rgba(244, 114, 182, 0.15);">
          <span style="color: #f472b6;">⚡</span>
        </div>
        <div class="legend-content">
          <div class="legend-header">
            <span class="legend-trait-name" style="color: #f472b6;">Energy</span>
            <span class="legend-percent" id="energy-pct" style="color: #f472b6;">72%</span>
          </div>
          <div class="legend-mapping">Ring frequency. Fast pulses = high energy. Slow, languid waves = calm presence.</div>
        </div>
      </div>

      <!-- Openness → Ring Reach -->
      <div class="legend-item">
        <div class="legend-icon" style="background: rgba(96, 165, 250, 0.15);">
          <span style="color: #60a5fa;">◎</span>
        </div>
        <div class="legend-content">
          <div class="legend-header">
            <span class="legend-trait-name" style="color: #60a5fa;">Openness</span>
            <span class="legend-percent" id="openness-pct" style="color: #60a5fa;">85%</span>
          </div>
          <div class="legend-mapping">Ring reach. Wide ripples = outward curiosity. Tight rings = focused depth.</div>
        </div>
      </div>

      <!-- Feeling → Ring Count -->
      <div class="legend-item">
        <div class="legend-icon" style="background: rgba(167, 139, 250, 0.15);">
          <span style="color: #a78bfa;">≋</span>
        </div>
        <div class="legend-content">
          <div class="legend-header">
            <span class="legend-trait-name" style="color: #a78bfa;">Feeling</span>
            <span class="legend-percent" id="feeling-pct" style="color: #a78bfa;">65%</span>
          </div>
          <div class="legend-mapping">Ring density. Many layered rings = rich emotional depth. Sparse = analytical clarity.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Personality Insight -->
  <div class="insight-card w-full max-w-sm" id="insight-card">
    <div class="insight-label">Your Pulse Signature</div>
    <p class="insight-text" id="insight-text">
      Your aura radiates with <strong>vibrant frequency</strong>, reaching <strong>wide into possibility</strong>, layered with <strong>emotional richness</strong>.
    </p>
  </div>

  <!-- Controls -->
  <div class="flex gap-3">
    <button onclick="shuffle()" class="control-btn primary">Shuffle Profile</button>
    <button onclick="resetToDefault()" class="control-btn secondary">Reset</button>
  </div>

<script>
// ═══════════════════════════════════════════════════════════════════════════
// AURA PULSE V4 — Radiating Rings from Personality Center
// ═══════════════════════════════════════════════════════════════════════════

// Core state
let traits = {
  energy: 72,    // Controls pulse SPEED (frequency)
  openness: 85,  // Controls ring REACH (how far they expand)
  feeling: 65,   // Controls ring COUNT (density/layers)
};

// Ring color palette (from TOKENS.md)
const RING_COLORS = [
  { color: '#8b5cf6', name: 'violet' },   // Primary
  { color: '#60a5fa', name: 'blue' },     // Secondary
  { color: '#a78bfa', name: 'purple' },   // Tertiary
  { color: '#c4b5fd', name: 'lavender' }, // Accent
];

// Container reference
const container = document.getElementById('aura-container');

// Active rings
let rings = [];
let lastSpawnTime = 0;

// ═══════════════════════════════════════════════════════════════════════════
// RING PARAMETERS — Derived from traits
// ═══════════════════════════════════════════════════════════════════════════

function getRingParams() {
  const e = traits.energy;
  const o = traits.openness;
  const f = traits.feeling;

  return {
    // Spawn interval: 400ms (high energy) to 1800ms (low energy)
    spawnInterval: 1800 - (e / 100) * 1400,

    // Ring max size: 60% (low openness) to 100% (high openness)
    maxScale: 0.6 + (o / 100) * 0.4,

    // Ring count: 2-3 (low feeling) to 5-7 (high feeling)
    ringCount: Math.floor(2 + (f / 100) * 5),

    // Animation duration: 3s (high energy) to 6s (low energy)
    duration: 6 - (e / 100) * 3,

    // Ring thickness: thicker for high feeling
    thickness: 1 + (f / 100) * 2,

    // Opacity varies with feeling
    opacity: 0.3 + (f / 100) * 0.4,
  };
}

// ═══════════════════════════════════════════════════════════════════════════
// RING CREATION
// ═══════════════════════════════════════════════════════════════════════════

function createRing(delay = 0, ringIndex = 0) {
  const params = getRingParams();

  // Color varies by ring index for layered effect
  const colorIndex = ringIndex % RING_COLORS.length;
  const color = RING_COLORS[colorIndex].color;

  const ring = document.createElement('div');
  ring.className = 'pulse-ring';

  // Size based on container
  const size = 280; // Container size
  ring.style.width = `${size}px`;
  ring.style.height = `${size}px`;

  // Use box-shadow for glowing ring effect instead of border
  const thickness = params.thickness;
  const glowSpread = thickness * 2;
  ring.style.boxShadow = `
    inset 0 0 0 ${thickness}px ${color},
    inset 0 0 ${glowSpread}px ${thickness}px ${color}40,
    0 0 ${glowSpread}px ${thickness}px ${color}30
  `;

  ring.style.setProperty('--ring-opacity', params.opacity);

  // Animation - slightly different duration for each ring
  const durationVariance = (ringIndex * 0.15);
  const duration = params.duration + durationVariance;
  ring.style.animation = `pulse-out ${duration}s ease-out forwards`;
  ring.style.animationDelay = `${delay}ms`;

  // Transform origin for scaling
  ring.style.transformOrigin = 'center center';

  // Max scale (openness) - slight variance per ring
  const scaleVariance = (ringIndex * 0.03);
  ring.style.setProperty('--max-scale', params.maxScale - scaleVariance);

  container.appendChild(ring);

  // Remove ring after animation
  setTimeout(() => {
    ring.remove();
  }, (duration * 1000) + delay + 100);

  return ring;
}

// ═══════════════════════════════════════════════════════════════════════════
// SPAWN LOOP
// ═══════════════════════════════════════════════════════════════════════════

function spawnRingWave() {
  const params = getRingParams();
  const ringCount = params.ringCount;

  // Spawn multiple rings with slight delays for layered effect
  for (let i = 0; i < ringCount; i++) {
    const delay = i * (params.spawnInterval / (ringCount * 2));
    createRing(delay, i);
  }
}

let spawnInterval;

function startPulsing() {
  // Initial spawn
  spawnRingWave();

  // Recurring spawn
  const tick = () => {
    const params = getRingParams();
    spawnRingWave();
    spawnInterval = setTimeout(tick, params.spawnInterval);
  };

  const params = getRingParams();
  spawnInterval = setTimeout(tick, params.spawnInterval);
}

function stopPulsing() {
  if (spawnInterval) {
    clearTimeout(spawnInterval);
  }
}

function restartPulsing() {
  stopPulsing();
  // Clear existing rings
  container.querySelectorAll('.pulse-ring').forEach(r => r.remove());
  startPulsing();
}

// ═══════════════════════════════════════════════════════════════════════════
// CORE GLOW — Updates with traits
// ═══════════════════════════════════════════════════════════════════════════

function updateCoreGlow() {
  const core = document.getElementById('aura-core');
  const center = document.getElementById('aura-center');

  // Core size based on feeling (emotional richness = bigger core)
  const coreSize = 50 + (traits.feeling / 100) * 30;
  core.style.width = `${coreSize}px`;
  core.style.height = `${coreSize}px`;

  // Color intensity based on energy
  const intensity = 0.4 + (traits.energy / 100) * 0.4;

  // Blend primary color (violet) with secondary based on openness
  const violet = [139, 92, 246];
  const blue = [96, 165, 250];
  const blend = traits.openness / 100;

  const r = Math.round(violet[0] * (1 - blend * 0.3) + blue[0] * (blend * 0.3));
  const g = Math.round(violet[1] * (1 - blend * 0.3) + blue[1] * (blend * 0.3));
  const b = Math.round(violet[2] * (1 - blend * 0.3) + blue[2] * (blend * 0.3));

  core.style.background = `radial-gradient(circle,
    rgba(${r}, ${g}, ${b}, ${intensity}) 0%,
    rgba(${r}, ${g}, ${b}, ${intensity * 0.5}) 40%,
    transparent 70%
  )`;

  // Center glow shadow intensity
  center.style.boxShadow = `
    0 0 20px rgba(${r}, ${g}, ${b}, ${intensity}),
    0 0 40px rgba(${r}, ${g}, ${b}, ${intensity * 0.7}),
    0 0 60px rgba(${r}, ${g}, ${b}, ${intensity * 0.4})
  `;
}

// ═══════════════════════════════════════════════════════════════════════════
// UI UPDATES
// ═══════════════════════════════════════════════════════════════════════════

function updateUI() {
  // Update percentages
  document.getElementById('energy-pct').textContent = traits.energy + '%';
  document.getElementById('openness-pct').textContent = traits.openness + '%';
  document.getElementById('feeling-pct').textContent = traits.feeling + '%';

  // Update insight text
  const e = traits.energy;
  const o = traits.openness;
  const f = traits.feeling;

  const energyPhrase = e > 70 ? 'vibrant frequency'
    : e > 50 ? 'steady rhythm'
    : e > 30 ? 'calm cadence'
    : 'meditative stillness';

  const openPhrase = o > 70 ? 'reaching wide into possibility'
    : o > 50 ? 'exploring with intention'
    : o > 30 ? 'focused inward'
    : 'deeply concentrated';

  const feelPhrase = f > 70 ? 'rich emotional layers'
    : f > 50 ? 'balanced depth'
    : f > 30 ? 'clear signals'
    : 'precise clarity';

  document.getElementById('insight-text').innerHTML =
    `Your aura radiates with <strong>${energyPhrase}</strong>, <strong>${openPhrase}</strong>, layered with <strong>${feelPhrase}</strong>.`;

  // Update core glow
  updateCoreGlow();
}

// ═══════════════════════════════════════════════════════════════════════════
// CONTROLS
// ═══════════════════════════════════════════════════════════════════════════

function shuffle() {
  const randomTrait = () => {
    const r = Math.random();
    if (r < 0.35) return 15 + Math.random() * 25;
    if (r > 0.65) return 60 + Math.random() * 35;
    return 35 + Math.random() * 30;
  };

  traits = {
    energy: Math.round(randomTrait()),
    openness: Math.round(randomTrait()),
    feeling: Math.round(randomTrait()),
  };

  updateUI();
  restartPulsing();
}

function resetToDefault() {
  traits = { energy: 72, openness: 85, feeling: 65 };
  updateUI();
  restartPulsing();
}

// ═══════════════════════════════════════════════════════════════════════════
// INITIALIZATION
// ═══════════════════════════════════════════════════════════════════════════

updateUI();
startPulsing();

// Pause when hidden for performance
document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    stopPulsing();
  } else {
    restartPulsing();
  }
});
</script>
</body>
</html>
