<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quick Profile — Weather System</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
  body { font-family: 'Inter', sans-serif; }

  .sky-canvas {
    position: relative;
    overflow: hidden;
    border-radius: 16px;
  }

  /* Atmospheric layers */
  .sky-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  /* Clouds with organic shapes */
  .cloud {
    position: absolute;
    border-radius: 50%;
    filter: blur(12px);
    mix-blend-mode: screen;
    animation: cloudDrift ease-in-out infinite;
  }

  @keyframes cloudDrift {
    0%, 100% { transform: translateX(0) translateY(0) scale(1); }
    33% { transform: translateX(8px) translateY(-4px) scale(1.02); }
    66% { transform: translateX(-5px) translateY(2px) scale(0.98); }
  }

  /* God rays / light beams */
  .light-ray {
    position: absolute;
    background: linear-gradient(to bottom, var(--ray-color) 0%, transparent 100%);
    transform-origin: top center;
    opacity: 0;
    filter: blur(4px);
    animation: rayPulse ease-in-out infinite;
  }

  @keyframes rayPulse {
    0%, 100% { opacity: 0.15; }
    50% { opacity: 0.35; }
  }

  /* Floating particles */
  .mote {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    animation: moteFloat ease-in-out infinite;
  }

  @keyframes moteFloat {
    0% { transform: translate(0, 0) scale(1); opacity: var(--start-opacity); }
    25% { transform: translate(var(--drift-x), var(--drift-y1)) scale(1.1); opacity: var(--mid-opacity); }
    50% { transform: translate(calc(var(--drift-x) * 0.5), var(--drift-y2)) scale(0.9); opacity: var(--end-opacity); }
    75% { transform: translate(calc(var(--drift-x) * -0.3), var(--drift-y1)) scale(1.05); opacity: var(--mid-opacity); }
    100% { transform: translate(0, 0) scale(1); opacity: var(--start-opacity); }
  }

  /* Stars */
  .star {
    position: absolute;
    border-radius: 50%;
    background: white;
    animation: starTwinkle ease-in-out infinite;
  }

  @keyframes starTwinkle {
    0%, 100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 0.8; transform: scale(1.3); }
  }

  /* Celestial body glow */
  .celestial {
    position: absolute;
    border-radius: 50%;
    filter: blur(20px);
  }

  .celestial-core {
    position: absolute;
    border-radius: 50%;
    filter: blur(2px);
  }

  /* Horizon mist */
  .horizon-mist {
    position: absolute;
    bottom: 0;
    left: -20%;
    right: -20%;
    height: 70%;
    background: linear-gradient(to top, var(--mist-color) 0%, transparent 100%);
    filter: blur(8px);
    opacity: 0.6;
    animation: mistShift 12s ease-in-out infinite;
  }

  @keyframes mistShift {
    0%, 100% { transform: translateX(0); opacity: 0.5; }
    50% { transform: translateX(5%); opacity: 0.7; }
  }

  /* Atmospheric shimmer */
  .shimmer-layer {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      transparent 0%,
      rgba(255,255,255,0.02) 25%,
      transparent 50%,
      rgba(255,255,255,0.02) 75%,
      transparent 100%
    );
    background-size: 200% 200%;
    animation: shimmerMove 8s ease-in-out infinite;
    pointer-events: none;
  }

  @keyframes shimmerMove {
    0% { background-position: 0% 0%; }
    50% { background-position: 100% 100%; }
    100% { background-position: 0% 0%; }
  }

  /* Transitions */
  .sky-canvas * {
    transition: opacity 0.8s ease, background 0.8s ease;
  }
</style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-8 gap-6" style="background: #08080c;">

  <!-- Controls -->
  <div class="flex gap-3 items-center flex-wrap justify-center">
    <button onclick="setMode('dark')" id="btn-dark" class="px-4 py-2 rounded-xl text-sm font-medium bg-gray-800 text-white border-2 border-blue-500">Dark</button>
    <button onclick="setMode('light')" id="btn-light" class="px-4 py-2 rounded-xl text-sm font-medium bg-white text-gray-800 border-2 border-gray-300">Light</button>
    <div class="w-px h-6 bg-gray-600"></div>
    <button onclick="randomize()" class="px-4 py-2 rounded-xl text-sm font-medium bg-blue-600 text-white hover:bg-blue-500 transition-colors">Shuffle</button>
  </div>

  <!-- Phone frame -->
  <div id="phone" class="w-[375px] rounded-[2.5rem] overflow-hidden shadow-2xl" style="background: #0a0a12; border: 2px solid #151520;">
    <div class="p-6 pt-10 pb-8">

      <!-- Weather Card -->
      <div id="card" class="rounded-2xl overflow-hidden" style="background: rgba(12, 12, 22, 0.85); border: 1px solid rgba(59, 130, 246, 0.2);">

        <!-- Header -->
        <div class="p-4 pb-2 text-center">
          <div class="text-2xl mb-1">&#10024;</div>
          <div id="title" class="text-base font-semibold text-white">Quick Profile</div>
          <div id="subtitle" class="text-xs text-gray-400">Your personality snapshot</div>
        </div>

        <!-- Weather Visualization -->
        <div class="px-4 py-2">
          <div id="sky" class="sky-canvas w-full h-44 relative rounded-2xl overflow-hidden">
            <!-- Dynamic content injected here -->
          </div>
        </div>

        <!-- Weather Description -->
        <div class="px-5 py-3 text-center">
          <p id="weather-mood" class="text-lg font-semibold text-white mb-1"></p>
          <p id="weather-desc" class="text-sm text-gray-400 leading-relaxed"></p>
        </div>

        <!-- Trait Legend (subtle) -->
        <div id="trait-legend" class="px-5 pb-3">
          <div class="flex justify-center gap-3 text-[10px] text-gray-500">
            <span id="legend-1" class="flex items-center gap-1"><span class="w-1.5 h-1.5 rounded-full bg-blue-400"></span></span>
            <span id="legend-2" class="flex items-center gap-1"><span class="w-1.5 h-1.5 rounded-full bg-amber-400"></span></span>
            <span id="legend-3" class="flex items-center gap-1"><span class="w-1.5 h-1.5 rounded-full bg-cyan-400"></span></span>
          </div>
        </div>

        <!-- CTA -->
        <div class="px-4 pb-4 pt-1">
          <div id="cta" class="p-3 rounded-xl text-center" style="background: rgba(59, 130, 246, 0.12);">
            <div id="cta-sub" class="text-xs text-gray-400">Based on 10 questions</div>
            <div id="cta-main" class="text-sm font-medium mt-1 text-blue-300">Starter Pack sharpens the picture with 40 more &#8594;</div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Trait explanation -->
  <div id="explainer" class="max-w-md text-center space-y-2 text-gray-500 text-xs mt-4">
    <p><strong class="text-gray-400">How weather encodes personality:</strong></p>
    <p><span class="text-blue-400">Cloudiness</span> = Inner world richness (clear = outward-focused, cloudy = reflective)</p>
    <p><span class="text-amber-400">Light temperature</span> = Thinking style (cool = analytical, warm = empathetic)</p>
    <p><span class="text-cyan-400">Wind &amp; particles</span> = Energy level (still = grounded, breezy = dynamic)</p>
  </div>

<script>
// Trait mappings:
// E (Extraversion): 0 = Introverted (cloudy), 100 = Extraverted (clear)
// A (Agreeableness): 0 = Analytical/Direct (cool twilight), 100 = Empathetic/Warm (golden hour)
// N (Energy): 0 = Steady/Calm (still), 100 = Dynamic/Restless (particles/movement)

let traits = {
  E: 72,  // Cloud coverage - start with mostly clear
  A: 78,  // Light temperature - warm golden
  N: 65   // Movement - breezy with particles
};

let isDark = true;

// Weather mood descriptions - evocative and personal
const moods = {
  clearWarm: ["Golden Hour", "Radiant Dawn", "Sunlit Spirit"],
  clearCool: ["Crystal Morning", "Arctic Clarity", "Starlit Focus"],
  cloudyWarm: ["Amber Dreams", "Soft Glow", "Honeyed Thoughts"],
  cloudyCool: ["Silver Depths", "Misty Mind", "Moonlit Reverie"],
  mixedWarm: ["Dappled Light", "Gentle Afternoon", "Filtered Warmth"],
  mixedCool: ["Shifting Skies", "Pearl Tones", "Twilight Balance"]
};

const descriptions = {
  clearWarm: "Open skies, open heart — you meet the world with radiant warmth and infectious enthusiasm.",
  clearCool: "Crystal clarity — your mind cuts through noise to find truth. Focused. Precise. Luminous.",
  cloudyWarm: "A rich inner landscape under golden light — you feel deeply and dream in vivid color.",
  cloudyCool: "Still waters run deep — you see what others miss, thinking in layers and patterns.",
  mixedWarm: "Dappled sunlight through leaves — grounded yet feeling, practical yet caring.",
  mixedCool: "Shifting light, shifting moods — you hold complexity with nuance and grace."
};

function lerp(a, b, t) {
  return a + (b - a) * t;
}

function lerpColor(c1, c2, t) {
  const parse = c => {
    if (c.startsWith('#')) {
      return [parseInt(c.slice(1,3),16), parseInt(c.slice(3,5),16), parseInt(c.slice(5,7),16)];
    }
    const m = c.match(/\d+/g);
    return m ? m.map(Number) : [0,0,0];
  };
  const [r1,g1,b1] = parse(c1);
  const [r2,g2,b2] = parse(c2);
  return `rgb(${Math.round(r1+(r2-r1)*t)}, ${Math.round(g1+(g2-g1)*t)}, ${Math.round(b1+(b2-b1)*t)})`;
}

function getWeatherCategory() {
  const cloudy = traits.E < 45;
  const clear = traits.E > 65;
  const warm = traits.A > 55;

  if (clear && warm) return 'clearWarm';
  if (clear && !warm) return 'clearCool';
  if (cloudy && warm) return 'cloudyWarm';
  if (cloudy && !warm) return 'cloudyCool';
  if (warm) return 'mixedWarm';
  return 'mixedCool';
}

function render() {
  const sky = document.getElementById('sky');
  const warmth = traits.A / 100;
  const cloudiness = 1 - (traits.E / 100);
  const energy = traits.N / 100;

  // Color palettes
  const palette = {
    dark: {
      coolSky: ['#05051a', '#0a1428', '#1a2a4a'],
      warmSky: ['#1a0a05', '#2a1508', '#4a2a1a'],
      coolHorizon: '#1a3a6a',
      warmHorizon: '#6a3a1a',
      coolMist: 'rgba(100, 150, 200, 0.3)',
      warmMist: 'rgba(200, 150, 100, 0.3)',
      coolCelestial: 'rgba(180, 200, 255, 0.8)',
      warmCelestial: 'rgba(255, 200, 100, 0.9)',
    },
    light: {
      coolSky: ['#b8d4e8', '#87CEEB', '#6cb4d9'],
      warmSky: ['#ffecd2', '#FFD89E', '#ffb366'],
      coolHorizon: '#a8c8e8',
      warmHorizon: '#ffcc80',
      coolMist: 'rgba(200, 220, 255, 0.4)',
      warmMist: 'rgba(255, 220, 180, 0.4)',
      coolCelestial: 'rgba(255, 255, 255, 0.95)',
      warmCelestial: 'rgba(255, 220, 150, 0.95)',
    }
  };

  const p = isDark ? palette.dark : palette.light;

  // Interpolate sky colors
  const skyTop = lerpColor(p.coolSky[0], p.warmSky[0], warmth);
  const skyMid = lerpColor(p.coolSky[1], p.warmSky[1], warmth);
  const skyBot = lerpColor(p.coolSky[2], p.warmSky[2], warmth);
  const horizonColor = lerpColor(p.coolHorizon, p.warmHorizon, warmth);
  const mistColor = lerpColor(p.coolMist, p.warmMist, warmth);
  const celestialColor = lerpColor(p.coolCelestial, p.warmCelestial, warmth);

  let html = '';

  // Base sky gradient (3 stops for depth)
  html += `
    <div class="sky-layer" style="background: linear-gradient(180deg, ${skyTop} 0%, ${skyMid} 50%, ${skyBot} 100%);"></div>
  `;

  // Horizon mist layer
  html += `<div class="horizon-mist" style="--mist-color: ${mistColor};"></div>`;

  // Celestial body (sun or moon)
  const celestialX = 75;
  const celestialY = 20;
  const celestialSize = isDark ? lerp(30, 50, warmth) : lerp(40, 70, warmth);
  const coreSize = celestialSize * 0.4;

  if (warmth > 0.5 || !isDark) {
    // Sun - larger glow, bright core
    html += `
      <div class="celestial" style="
        width: ${celestialSize * 2}px;
        height: ${celestialSize * 2}px;
        right: ${celestialX - celestialSize/2}px;
        top: ${celestialY - celestialSize/2}px;
        background: ${celestialColor};
        opacity: ${0.5 + (1 - cloudiness) * 0.4};
        filter: blur(${celestialSize * 0.6}px);
      "></div>
      <div class="celestial-core" style="
        width: ${coreSize}px;
        height: ${coreSize}px;
        right: ${celestialX + celestialSize/2 - coreSize/2}px;
        top: ${celestialY + celestialSize/2 - coreSize/2}px;
        background: ${warmth > 0.5 ? 'rgba(255, 250, 220, 0.9)' : 'rgba(255, 255, 255, 0.9)'};
        opacity: ${0.6 + (1 - cloudiness) * 0.35};
      "></div>
    `;

    // Light rays (god rays) for warm, clearer conditions
    if (warmth > 0.4 && cloudiness < 0.7) {
      const rayCount = Math.round((1 - cloudiness) * 5);
      const rayColor = warmth > 0.5
        ? 'rgba(255, 220, 150, 0.3)'
        : 'rgba(220, 240, 255, 0.2)';

      for (let i = 0; i < rayCount; i++) {
        const angle = -20 + (i * 15) + (Math.random() * 10 - 5);
        const width = 20 + Math.random() * 30;
        const delay = Math.random() * 4;
        html += `
          <div class="light-ray" style="
            --ray-color: ${rayColor};
            width: ${width}px;
            height: 150px;
            right: ${celestialX + celestialSize/2 - width/2}px;
            top: ${celestialY + celestialSize/2}px;
            transform: rotate(${angle}deg);
            animation-delay: ${delay}s;
            animation-duration: ${6 + Math.random() * 3}s;
            opacity: ${0.1 + (1 - cloudiness) * 0.2};
          "></div>
        `;
      }
    }
  }

  // Stars (only visible in cool, clear, dark conditions)
  if (isDark && warmth < 0.5 && cloudiness < 0.5) {
    const starCount = Math.round((1 - warmth) * (1 - cloudiness) * 20);
    for (let i = 0; i < starCount; i++) {
      const x = Math.random() * 90 + 5;
      const y = Math.random() * 50 + 5;
      const size = 1 + Math.random() * 2;
      const delay = Math.random() * 4;
      html += `
        <div class="star" style="
          left: ${x}%;
          top: ${y}%;
          width: ${size}px;
          height: ${size}px;
          animation-delay: ${delay}s;
          animation-duration: ${2 + Math.random() * 3}s;
        "></div>
      `;
    }
  }

  // Clouds - organic, multi-layered
  const cloudCount = Math.round(cloudiness * 10);
  const cloudLayers = [
    { yRange: [5, 30], sizeRange: [80, 140], opacity: 0.3 },
    { yRange: [20, 50], sizeRange: [50, 100], opacity: 0.4 },
    { yRange: [35, 65], sizeRange: [60, 120], opacity: 0.5 }
  ];

  for (let i = 0; i < cloudCount; i++) {
    const layer = cloudLayers[i % 3];
    const x = (i * 25 + Math.random() * 30) % 110 - 10;
    const y = layer.yRange[0] + Math.random() * (layer.yRange[1] - layer.yRange[0]);
    const w = layer.sizeRange[0] + Math.random() * (layer.sizeRange[1] - layer.sizeRange[0]);
    const h = w * (0.4 + Math.random() * 0.3);
    const baseOpacity = layer.opacity * cloudiness;
    const delay = i * 0.7;
    const duration = 10 + Math.random() * 8;

    // Cloud color varies with warmth
    const cloudColor = isDark
      ? (warmth > 0.5
        ? `rgba(200, 180, 160, ${baseOpacity})`
        : `rgba(160, 180, 200, ${baseOpacity})`)
      : (warmth > 0.5
        ? `rgba(255, 245, 235, ${baseOpacity * 1.5})`
        : `rgba(240, 248, 255, ${baseOpacity * 1.5})`);

    html += `
      <div class="cloud" style="
        left: ${x}%;
        top: ${y}%;
        width: ${w}px;
        height: ${h}px;
        background: radial-gradient(ellipse at 50% 60%, ${cloudColor} 0%, transparent 70%);
        animation-delay: ${delay}s;
        animation-duration: ${duration}s;
      "></div>
    `;
  }

  // Floating particles/motes (energy indicator)
  const moteCount = Math.round(energy * 25);
  for (let i = 0; i < moteCount; i++) {
    const x = Math.random() * 100;
    const y = Math.random() * 100;
    const size = 1 + Math.random() * 3;
    const delay = Math.random() * 5;
    const duration = 5 + Math.random() * 5;

    // Mote color matches warmth
    const moteColor = warmth > 0.5
      ? `rgba(255, ${Math.round(200 + Math.random() * 55)}, ${Math.round(100 + Math.random() * 80)}, 0.7)`
      : `rgba(${Math.round(180 + Math.random() * 40)}, ${Math.round(200 + Math.random() * 40)}, 255, 0.6)`;

    const driftX = (Math.random() * 30 - 15) + 'px';
    const driftY1 = -(10 + Math.random() * 20) + 'px';
    const driftY2 = -(20 + Math.random() * 30) + 'px';

    html += `
      <div class="mote" style="
        left: ${x}%;
        top: ${y}%;
        width: ${size}px;
        height: ${size}px;
        background: ${moteColor};
        --drift-x: ${driftX};
        --drift-y1: ${driftY1};
        --drift-y2: ${driftY2};
        --start-opacity: ${0.3 + Math.random() * 0.3};
        --mid-opacity: ${0.5 + Math.random() * 0.4};
        --end-opacity: ${0.2 + Math.random() * 0.3};
        animation-delay: ${delay}s;
        animation-duration: ${duration}s;
        ${energy < 0.25 ? 'animation-play-state: paused; opacity: 0.3;' : ''}
      "></div>
    `;
  }

  // Shimmer layer for atmospheric depth
  html += `<div class="shimmer-layer"></div>`;

  sky.innerHTML = html;

  // Update text
  const category = getWeatherCategory();
  const moodOptions = moods[category];
  document.getElementById('weather-mood').textContent = moodOptions[Math.floor(Math.random() * moodOptions.length)];
  document.getElementById('weather-desc').textContent = descriptions[category];

  // Legend
  const cloudLabel = traits.E > 60 ? 'Clear skies' : traits.E < 40 ? 'Cloud-filled' : 'Partial clouds';
  const warmLabel = traits.A > 60 ? 'Golden light' : traits.A < 40 ? 'Cool twilight' : 'Soft glow';
  const windLabel = traits.N > 60 ? 'Breezy' : traits.N < 40 ? 'Still air' : 'Gentle drift';

  document.getElementById('legend-1').innerHTML = `<span class="w-1.5 h-1.5 rounded-full ${traits.E > 50 ? 'bg-blue-400' : 'bg-blue-600'}"></span> ${cloudLabel}`;
  document.getElementById('legend-2').innerHTML = `<span class="w-1.5 h-1.5 rounded-full ${traits.A > 50 ? 'bg-amber-400' : 'bg-indigo-400'}"></span> ${warmLabel}`;
  document.getElementById('legend-3').innerHTML = `<span class="w-1.5 h-1.5 rounded-full ${traits.N > 50 ? 'bg-cyan-400' : 'bg-slate-400'}"></span> ${windLabel}`;

  applyTheme();
}

function applyTheme() {
  const phone = document.getElementById('phone');
  const card = document.getElementById('card');
  const title = document.getElementById('title');
  const subtitle = document.getElementById('subtitle');
  const cta = document.getElementById('cta');
  const ctaSub = document.getElementById('cta-sub');
  const ctaMain = document.getElementById('cta-main');
  const weatherMood = document.getElementById('weather-mood');
  const weatherDesc = document.getElementById('weather-desc');
  const explainer = document.getElementById('explainer');
  const legend = document.getElementById('trait-legend');

  if (isDark) {
    document.body.style.background = '#08080c';
    phone.style.background = '#0a0a12';
    phone.style.borderColor = '#151520';
    card.style.background = 'rgba(12, 12, 22, 0.85)';
    card.style.borderColor = 'rgba(59, 130, 246, 0.2)';
    title.className = 'text-base font-semibold text-white';
    subtitle.className = 'text-xs text-gray-400';
    weatherMood.className = 'text-lg font-semibold text-white mb-1';
    weatherDesc.className = 'text-sm text-gray-400 leading-relaxed';
    cta.style.background = 'rgba(59, 130, 246, 0.12)';
    ctaSub.className = 'text-xs text-gray-400';
    ctaMain.className = 'text-sm font-medium mt-1 text-blue-300';
    explainer.className = 'max-w-md text-center space-y-2 text-gray-500 text-xs mt-4';
    legend.querySelector('div').className = 'flex justify-center gap-3 text-[10px] text-gray-500';
  } else {
    document.body.style.background = '#f3f4f6';
    phone.style.background = '#ffffff';
    phone.style.borderColor = '#e5e7eb';
    card.style.background = 'rgba(255, 255, 255, 0.95)';
    card.style.borderColor = 'rgba(59, 130, 246, 0.15)';
    title.className = 'text-base font-semibold text-gray-900';
    subtitle.className = 'text-xs text-gray-500';
    weatherMood.className = 'text-lg font-semibold text-gray-900 mb-1';
    weatherDesc.className = 'text-sm text-gray-600 leading-relaxed';
    cta.style.background = '#eef2ff';
    ctaSub.className = 'text-xs text-gray-500';
    ctaMain.className = 'text-sm font-semibold mt-1 text-blue-600';
    explainer.className = 'max-w-md text-center space-y-2 text-gray-600 text-xs mt-4';
    legend.querySelector('div').className = 'flex justify-center gap-3 text-[10px] text-gray-600';
  }
}

function setMode(mode) {
  isDark = mode === 'dark';
  document.getElementById('btn-dark').className = `px-4 py-2 rounded-xl text-sm font-medium bg-gray-800 text-white border-2 ${isDark ? 'border-blue-500' : 'border-gray-600'}`;
  document.getElementById('btn-light').className = `px-4 py-2 rounded-xl text-sm font-medium bg-white text-gray-800 border-2 ${!isDark ? 'border-blue-500' : 'border-gray-300'}`;
  render();
}

function randomize() {
  // Generate diverse personalities
  const patterns = [
    { E: 85, A: 75, N: 70 }, // Clear, warm, breezy - sunny extrovert
    { E: 20, A: 80, N: 30 }, // Cloudy, warm, still - dreamy introvert
    { E: 75, A: 25, N: 60 }, // Clear, cool, breezy - sharp analyst
    { E: 30, A: 30, N: 20 }, // Cloudy, cool, still - deep thinker
    { E: 50, A: 60, N: 45 }, // Mixed, warm, gentle - balanced
    { E: 60, A: 40, N: 80 }, // Partial, cool, windy - restless mind
  ];

  // Random with some structure
  if (Math.random() > 0.3) {
    const base = patterns[Math.floor(Math.random() * patterns.length)];
    traits.E = Math.max(10, Math.min(90, base.E + (Math.random() * 30 - 15)));
    traits.A = Math.max(10, Math.min(90, base.A + (Math.random() * 30 - 15)));
    traits.N = Math.max(10, Math.min(90, base.N + (Math.random() * 30 - 15)));
  } else {
    // Fully random
    traits.E = Math.round(10 + Math.random() * 80);
    traits.A = Math.round(10 + Math.random() * 80);
    traits.N = Math.round(10 + Math.random() * 80);
  }

  render();
}

// Initial render
render();
</script>
</body>
</html>
