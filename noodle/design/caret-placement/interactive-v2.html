<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Caret Placement ‚Äî Interactive</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #0a0a0a;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro', system-ui, sans-serif;
    color: #e2e8f0;
    height: 100vh;
    display: flex;
    overflow: hidden;
  }

  /* LEFT */
  .phone-side {
    flex: 0 0 440px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .phone-frame {
    width: 390px;
    height: 844px;
    background: #0d1117;
    border-radius: 44px;
    border: 3px solid #1a1a2e;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: 0 0 60px rgba(0,0,0,0.5);
  }

  /* RIGHT */
  .options-side {
    flex: 1;
    padding: 40px 40px 40px 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .options-side h1 { font-size: 20px; font-weight: 700; }
  .options-side .sub { font-size: 13px; color: #64748b; margin-top: -8px; }

  .opt-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
  .opt-card {
    background: #111827;
    border-radius: 14px;
    padding: 14px;
    border: 2px solid #1e293b;
    cursor: pointer;
    transition: all 0.15s;
  }
  .opt-card:hover { border-color: #334155; background: #1a2234; }
  .opt-card.active { border-color: #8b5cf6; background: rgba(139,92,246,0.08); }
  .opt-head { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
  .opt-badge {
    width: 22px; height: 22px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 10px; font-weight: 800;
  }
  .opt-name { font-size: 13px; font-weight: 600; }
  .opt-desc { font-size: 11px; color: #64748b; margin-top: 8px; line-height: 1.35; }

  /* Mini preview card in options */
  .mp { background: #1f2937; border-radius: 10px; border: 1px solid rgba(100,116,139,0.2); overflow: hidden; }
  .mp-row { padding: 10px 12px; display: flex; align-items: center; gap: 10px; }
  .mp-circ {
    width: 30px; height: 30px; border-radius: 50%;
    border: 2px solid rgba(100,116,139,0.3);
    display: flex; align-items: center; justify-content: center;
    font-size: 10px; font-weight: 700; color: #94a3b8; flex-shrink: 0;
  }
  .mp-name { flex: 1; font-size: 12px; font-weight: 600; color: #f1f5f9; white-space: nowrap; }
  .mp-pill {
    font-size: 10px; font-weight: 500; padding: 3px 8px; border-radius: 999px;
    background: rgba(100,116,139,0.25); color: #cbd5e1; border: 1px solid rgba(100,116,139,0.3);
    white-space: nowrap; flex-shrink: 0;
  }
  .mp-chev svg { stroke: #94a3b8; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }

  /* Phone internals */
  .scroll-content {
    flex: 1; overflow-y: auto;
    padding: 4px 14px 24px;
    display: flex; flex-direction: column; gap: 10px;
  }
  .p-card { border-radius: 16px; overflow: hidden; }
  .p-row { padding: 14px; display: flex; align-items: center; gap: 12px; position: relative; z-index: 2; }
  .p-circ { width: 44px; height: 44px; flex-shrink: 0; position: relative; }
  .p-circ-num {
    position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center; font-weight: 700;
  }
  .p-name { flex: 1; font-size: 15.5px; font-weight: 600; color: #f1f5f9; display: flex; align-items: center; gap: 6px; }
  .p-pill {
    font-size: 11.5px; font-weight: 500; padding: 6px 14px; border-radius: 999px;
    white-space: nowrap; flex-shrink: 0;
  }

  .chev-svg { stroke: #94a3b8; stroke-width: 2; fill: none; stroke-linecap: round; stroke-linejoin: round; }

  /* Completed */
  .c-block { border-radius: 16px; background: #1f2937; border: 1px solid rgba(100,116,139,0.1); overflow: hidden; }
  .c-row { padding: 10px 14px; display: flex; align-items: center; gap: 10px; opacity: 0.7; }
  .c-row + .c-row { border-top: 1px solid rgba(100,116,139,0.1); }
  .c-icon { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; }

  .note-box {
    margin-top: 8px; padding: 14px 18px; background: #111827;
    border-radius: 12px; border: 1px solid #1e293b;
    font-size: 12px; color: #64748b; line-height: 1.5;
  }
  .note-box strong { color: #94a3b8; }

  /* Active selection label on phone */
  .selection-label {
    text-align: center; padding: 6px 0;
    font-size: 11px; font-weight: 600; color: #8b5cf6;
    letter-spacing: 0.05em; text-transform: uppercase;
    opacity: 0;
    transition: opacity 0.2s;
  }
  .selection-label.show { opacity: 1; }
</style>
</head>
<body>

<div class="phone-side">
  <div class="phone-frame">
    <!-- Status bar -->
    <div style="height:54px; display:flex; align-items:flex-end; justify-content:space-between; padding:0 28px 8px;">
      <span style="color:#fff; font-size:15px; font-weight:600;">9:41</span>
      <div style="display:flex; gap:5px; align-items:center;">
        <span style="color:#fff; font-size:11px;">‚ñÇ‚ñÑ‚ñÜ‚ñà</span>
        <span style="color:#fff; font-size:13px;">‚ö°</span>
      </div>
    </div>
    <!-- Top bar -->
    <div style="height:40px; display:flex; align-items:center; padding:0 16px; gap:8px;">
      <div style="width:26px; height:26px; border-radius:50%; background:linear-gradient(135deg,#3b82f6,#8b5cf6); display:flex; align-items:center; justify-content:center; font-size:12px;">üåÄ</div>
      <div style="flex:1; text-align:center; color:#94a3b8; font-size:13px;">0 answered</div>
      <span style="color:#f59e0b; font-size:13px;">üî•3</span>
      <div style="width:26px; height:26px; border-radius:50%; border:1.5px dashed #475569; display:flex; align-items:center; justify-content:center; color:#64748b; font-size:12px;">?</div>
      <span style="color:#64748b; font-size:15px;">‚ò∞</span>
    </div>
    <!-- Nav -->
    <div style="height:44px; display:flex; align-items:center; padding:0 16px; gap:10px;">
      <span style="color:#94a3b8; font-size:18px;">‚Üê</span>
      <span style="font-size:15px;">üïØÔ∏è</span>
      <span style="color:#fff; font-size:16px; font-weight:700; flex:1;">Reveal</span>
      <div style="background:linear-gradient(135deg,#d946ef,#f43f5e); padding:5px 14px; border-radius:999px; font-size:12px; font-weight:600; color:#fff;">Analysis</div>
    </div>
    <!-- Tabs -->
    <div style="display:flex; gap:6px; padding:6px 16px 10px; justify-content:center;">
      <div style="padding:4px 12px; border-radius:999px; border:1px solid #8b5cf6; color:#8b5cf6; font-size:12px; font-weight:500;">Me</div>
      <div style="padding:4px 12px; border-radius:999px; color:#64748b; font-size:12px;">DEMO ‚ìò</div>
      <div style="padding:4px 12px; border-radius:999px; border:1px solid #475569; color:#e2e8f0; font-size:12px;">Alex</div>
      <div style="padding:4px 12px; border-radius:999px; border:1px solid #3b82f6; color:#3b82f6; font-size:12px;">Bob</div>
      <div style="padding:4px 12px; border-radius:999px; border:1px solid #f43f5e; color:#f43f5e; font-size:12px;">Cindy</div>
    </div>

    <!-- Selection label -->
    <div class="selection-label" id="selLabel">‚Üê Click an option</div>

    <!-- Cards -->
    <div class="scroll-content">
      <!-- Personality (hero, no caret) -->
      <div class="p-card" style="background:#1f2937; border:1px solid rgba(139,92,246,0.3); position:relative;">
        <div style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; z-index:1;">
          <div style="width:220px; height:220px; border-radius:50%; background:radial-gradient(ellipse at center, rgba(139,92,246,0.12) 0%, transparent 70%);"></div>
        </div>
        <div class="p-row">
          <div class="p-circ">
            <svg width="44" height="44" viewBox="0 0 44 44"><circle cx="22" cy="22" r="19" fill="none" stroke="rgba(139,92,246,0.2)" stroke-width="3"/><circle cx="22" cy="22" r="19" fill="none" stroke="#8b5cf6" stroke-width="3" stroke-dasharray="47.75 119.38" transform="rotate(-90 22 22)" stroke-linecap="round"/></svg>
            <div class="p-circ-num" style="font-size:11px; color:#a78bfa;">40%</div>
          </div>
          <div class="p-name">Personality</div>
          <div class="p-pill" style="background:rgba(139,92,246,0.25); color:#c4b5fd; border:1px solid rgba(139,92,246,0.3);">Continue ‚Üí</div>
        </div>
      </div>

      <!-- Shadow Self (multi-test ‚Äî dynamic) -->
      <div id="shadow-card" class="p-card" style="background:#1f2937; border:1px solid rgba(100,116,139,0.2);"></div>

      <!-- Mind (multi-test ‚Äî dynamic) -->
      <div id="mind-card" class="p-card" style="background:#1f2937; border:1px solid rgba(59,130,246,0.2);"></div>

      <!-- Behavior (single, no caret) -->
      <div class="p-card" style="background:#1f2937; border:1px solid rgba(245,158,11,0.2);">
        <div class="p-row">
          <div class="p-circ">
            <svg width="44" height="44" viewBox="0 0 44 44"><circle cx="22" cy="22" r="19" fill="none" stroke="rgba(245,158,11,0.15)" stroke-width="3"/></svg>
            <div class="p-circ-num" style="font-size:13px; color:#fbbf24;">15</div>
          </div>
          <div class="p-name">Behavior</div>
          <div class="p-pill" style="background:rgba(245,158,11,0.25); color:#fcd34d; border:1px solid rgba(245,158,11,0.3);">Start ‚Üí</div>
        </div>
      </div>

      <!-- Completed -->
      <div class="c-block">
        <div class="c-row">
          <div class="c-icon" style="background:rgba(59,130,246,0.15);">‚ú®</div>
          <div style="flex:1; font-size:13px; color:#94a3b8;">Quick Profile</div>
          <span style="color:#475569; font-size:14px;">‚Ä∫</span>
        </div>
        <div class="c-row">
          <div class="c-icon" style="background:rgba(99,102,241,0.15);">üöÄ</div>
          <div style="flex:1; font-size:13px; color:#94a3b8;">Starter Pack</div>
          <span style="color:#475569; font-size:14px;">‚Ä∫</span>
        </div>
        <div class="c-row">
          <div class="c-icon" style="background:rgba(16,185,129,0.15);">üíé</div>
          <div style="flex:1; font-size:13px; color:#94a3b8;">Character</div>
          <span style="color:#475569; font-size:14px;">‚Ä∫</span>
        </div>
        <div class="c-row">
          <div class="c-icon" style="background:rgba(217,70,239,0.15);">üíö</div>
          <div style="flex:1; font-size:13px; color:#94a3b8;">Relationships</div>
          <span style="color:#475569; font-size:14px;">‚Ä∫</span>
        </div>
      </div>
    </div>

    <!-- Home indicator -->
    <div style="height:24px; display:flex; align-items:center; justify-content:center;">
      <div style="width:130px; height:5px; border-radius:3px; background:#333;"></div>
    </div>
  </div>
</div>

<div class="options-side">
  <h1>Where should the expand caret go?</h1>
  <p class="sub">Click an option ‚Äî it updates Shadow Self + Mind on the left.</p>

  <div class="opt-grid">
    <div class="opt-card" onclick="pick('a')" id="opt-a">
      <div class="opt-head">
        <div class="opt-badge" style="background:rgba(239,68,68,0.15); color:#f87171;">A</div>
        <div class="opt-name">Right of pill</div>
      </div>
      <div class="mp"><div class="mp-row">
        <div class="mp-circ">2</div>
        <div class="mp-name">Shadow Self</div>
        <div class="mp-pill">Continue ‚Üí</div>
        <div style="width:20px; height:20px; border-radius:50%; background:rgba(100,116,139,0.12); display:flex; align-items:center; justify-content:center; flex-shrink:0;">
          <svg width="11" height="11" viewBox="0 0 16 16" class="chev-svg"><polyline points="4 6 8 10 12 6"/></svg>
        </div>
      </div></div>
      <div class="opt-desc">Pill starts test. Circle expands. Two distinct targets.</div>
    </div>

    <div class="opt-card" onclick="pick('b')" id="opt-b">
      <div class="opt-head">
        <div class="opt-badge" style="background:rgba(245,158,11,0.15); color:#fbbf24;">B</div>
        <div class="opt-name">Left of pill</div>
      </div>
      <div class="mp"><div class="mp-row">
        <div class="mp-circ">2</div>
        <div class="mp-name">Shadow Self</div>
        <div style="width:20px; height:20px; border-radius:50%; background:rgba(100,116,139,0.12); display:flex; align-items:center; justify-content:center; flex-shrink:0;">
          <svg width="11" height="11" viewBox="0 0 16 16" class="chev-svg"><polyline points="4 6 8 10 12 6"/></svg>
        </div>
        <div class="mp-pill">Continue ‚Üí</div>
      </div></div>
      <div class="opt-desc">Expand is secondary. L‚ÜíR: info ‚Üí expand ‚Üí start.</div>
    </div>

    <div class="opt-card" onclick="pick('c')" id="opt-c">
      <div class="opt-head">
        <div class="opt-badge" style="background:rgba(16,185,129,0.15); color:#34d399;">C</div>
        <div class="opt-name">Bottom strip</div>
      </div>
      <div class="mp"><div class="mp-row">
        <div class="mp-circ">2</div>
        <div class="mp-name">Shadow Self</div>
        <div class="mp-pill">Continue ‚Üí</div>
      </div><div style="display:flex; align-items:center; justify-content:center; padding:4px 0 6px; border-top:1px solid rgba(100,116,139,0.12);">
        <svg width="12" height="12" viewBox="0 0 16 16" class="chev-svg"><polyline points="4 6 8 10 12 6"/></svg>
      </div></div>
      <div class="opt-desc">Clean row, bottom hint. Adds ~20px height.</div>
    </div>

    <div class="opt-card" onclick="pick('d')" id="opt-d">
      <div class="opt-head">
        <div class="opt-badge" style="background:rgba(59,130,246,0.15); color:#60a5fa;">D</div>
        <div class="opt-name">Split pill</div>
      </div>
      <div class="mp"><div class="mp-row">
        <div class="mp-circ">2</div>
        <div class="mp-name">Shadow Self</div>
        <div style="display:flex; align-items:stretch; border-radius:999px; overflow:hidden; border:1px solid rgba(100,116,139,0.3);">
          <div style="font-size:10px; font-weight:500; padding:3px 6px 3px 8px; background:rgba(100,116,139,0.25); color:#cbd5e1;">Continue ‚Üí</div>
          <div style="padding:0 6px; background:rgba(100,116,139,0.15); display:flex; align-items:center; border-left:1px solid rgba(100,116,139,0.3);">
            <svg width="10" height="10" viewBox="0 0 16 16" class="chev-svg"><polyline points="4 6 8 10 12 6"/></svg>
          </div>
        </div>
      </div></div>
      <div class="opt-desc">One unit, two zones. Compact.</div>
    </div>

    <div class="opt-card" onclick="pick('e')" id="opt-e">
      <div class="opt-head">
        <div class="opt-badge" style="background:rgba(217,70,239,0.15); color:#e879f9;">E</div>
        <div class="opt-name">Bare chevron</div>
      </div>
      <div class="mp"><div class="mp-row">
        <div class="mp-circ">2</div>
        <div class="mp-name">Shadow Self</div>
        <div class="mp-pill">Continue ‚Üí</div>
        <div style="opacity:0.5; display:flex; align-items:center; margin-left:-4px; flex-shrink:0;">
          <svg width="14" height="14" viewBox="0 0 16 16" class="chev-svg"><polyline points="4 6 8 10 12 6"/></svg>
        </div>
      </div></div>
      <div class="opt-desc">Just a ÀÖ. No background. Lightest touch.</div>
    </div>

    <div class="opt-card" onclick="pick('f')" id="opt-f">
      <div class="opt-head">
        <div class="opt-badge" style="background:rgba(6,182,212,0.15); color:#22d3ee;">F</div>
        <div class="opt-name">Inline after name</div>
      </div>
      <div class="mp"><div class="mp-row">
        <div class="mp-circ">2</div>
        <div class="mp-name" style="display:flex; align-items:center; gap:4px;">Shadow Self <span style="opacity:0.5; display:flex;"><svg width="11" height="11" viewBox="0 0 16 16" class="chev-svg"><polyline points="4 6 8 10 12 6"/></svg></span></div>
        <div class="mp-pill">Continue ‚Üí</div>
      </div></div>
      <div class="opt-desc">Part of the label. Current spot, bigger.</div>
    </div>
  </div>

  <div class="note-box">
    <strong>Note:</strong> Carets only on multi-test cards (Shadow Self, Mind). Personality, Behavior, and completed rows stay the same.
  </div>
</div>

<script>
// Card templates for each option
const chevSvg = (w=14) => `<svg width="${w}" height="${w}" viewBox="0 0 16 16" style="stroke:#94a3b8; stroke-width:2; fill:none; stroke-linecap:round; stroke-linejoin:round;"><polyline points="4 6 8 10 12 6"/></svg>`;

function makeCard(name, num, color, pillBg, pillColor, pillBorder, option) {
  const circleStroke = color === 'slate' ? '#64748b' : '#3b82f6';
  const circleTrack = color === 'slate' ? 'rgba(100,116,139,0.2)' : 'rgba(59,130,246,0.2)';
  const numColor = color === 'slate' ? '#94a3b8' : '#60a5fa';
  const dash = color === 'slate' ? '80' : '20';

  const circle = `
    <div style="width:44px; height:44px; flex-shrink:0; position:relative;">
      <svg width="44" height="44" viewBox="0 0 44 44">
        <circle cx="22" cy="22" r="19" fill="none" stroke="${circleTrack}" stroke-width="3"/>
        <circle cx="22" cy="22" r="19" fill="none" stroke="${circleStroke}" stroke-width="3" stroke-dasharray="${dash} 119.38" transform="rotate(-90 22 22)" stroke-linecap="round"/>
      </svg>
      <div style="position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:13px; font-weight:700; color:${numColor};">${num}</div>
    </div>`;

  const pill = `<div style="font-size:11.5px; font-weight:500; padding:6px 14px; border-radius:999px; background:${pillBg}; color:${pillColor}; border:1px solid ${pillBorder}; white-space:nowrap; flex-shrink:0;">Continue ‚Üí</div>`;

  const chevCircle = `<div style="width:28px; height:28px; border-radius:50%; background:rgba(100,116,139,0.12); display:flex; align-items:center; justify-content:center; flex-shrink:0;">${chevSvg(14)}</div>`;

  let inner = '';

  if (option === 'a') {
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9;">${name}</div>
      ${pill}
      ${chevCircle}
    </div>`;
  }
  else if (option === 'b') {
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9;">${name}</div>
      ${chevCircle}
      ${pill}
    </div>`;
  }
  else if (option === 'c') {
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9;">${name}</div>
      ${pill}
    </div>
    <div style="display:flex; align-items:center; justify-content:center; padding:4px 0 8px; border-top:1px solid rgba(100,116,139,0.12);">
      ${chevSvg(16)}
    </div>`;
  }
  else if (option === 'd') {
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9;">${name}</div>
      <div style="display:flex; align-items:stretch; border-radius:999px; overflow:hidden; border:1px solid ${pillBorder}; flex-shrink:0;">
        <div style="font-size:11.5px; font-weight:500; padding:6px 8px 6px 14px; background:${pillBg}; color:${pillColor}; white-space:nowrap;">Continue ‚Üí</div>
        <div style="padding:0 10px; background:rgba(100,116,139,0.1); display:flex; align-items:center; border-left:1px solid ${pillBorder};">
          ${chevSvg(13)}
        </div>
      </div>
    </div>`;
  }
  else if (option === 'e') {
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9;">${name}</div>
      ${pill}
      <div style="opacity:0.5; display:flex; align-items:center; flex-shrink:0; margin-left:-4px;">
        ${chevSvg(18)}
      </div>
    </div>`;
  }
  else if (option === 'f') {
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9; display:flex; align-items:center; gap:6px;">
        ${name}
        <span style="opacity:0.5; display:flex; align-items:center;">${chevSvg(14)}</span>
      </div>
      ${pill}
    </div>`;
  }
  else {
    // Default: no caret (clean)
    inner = `<div style="padding:14px; display:flex; align-items:center; gap:12px;">
      ${circle}
      <div style="flex:1; font-size:15.5px; font-weight:600; color:#f1f5f9;">${name}</div>
      ${pill}
    </div>`;
  }

  return inner;
}

function pick(opt) {
  // Highlight active option
  document.querySelectorAll('.opt-card').forEach(c => c.classList.remove('active'));
  document.getElementById('opt-' + opt).classList.add('active');

  // Update label
  const label = document.getElementById('selLabel');
  const names = {a:'A ‚Äî Right of pill', b:'B ‚Äî Left of pill', c:'C ‚Äî Bottom strip', d:'D ‚Äî Split pill', e:'E ‚Äî Bare chevron', f:'F ‚Äî Inline after name'};
  label.textContent = names[opt];
  label.classList.add('show');

  // Re-render Shadow Self
  document.getElementById('shadow-card').innerHTML = makeCard(
    'Shadow Self', '2', 'slate',
    'rgba(100,116,139,0.25)', '#cbd5e1', 'rgba(100,116,139,0.3)',
    opt
  );

  // Re-render Mind
  document.getElementById('mind-card').innerHTML = makeCard(
    'Mind', '4', 'blue',
    'rgba(59,130,246,0.25)', '#93c5fd', 'rgba(59,130,246,0.3)',
    opt
  );
}

// Init: render default (no caret)
pick('none');
document.querySelectorAll('.opt-card').forEach(c => c.classList.remove('active'));
document.getElementById('selLabel').textContent = '‚Üê Click an option on the right';
document.getElementById('selLabel').classList.add('show');
</script>

</body>
</html>
